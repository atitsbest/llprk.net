@model MvcApplication1.ViewModels.ShopIndex
@{
    ViewBag.Title = "Home Page";
    Layout = null;
}
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" ng-app> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" ng-app> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" ng-app> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" ng-app="ShopApp">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>lillypark [PROTOTYP]</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="description" content="lillypark,Tasche,Taschen,Bag,Sak Saum">

    @Styles.Render("~/Content/shop")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <!--[if lt IE 8]>
        <p class="chromeframe alert alert-error">
            Hoppla. Du verwendest einen alten Browser. 
            <a href="http://browsehappy.com/">Bring Deinen Browser heute auf den neuesten Stand</a> oder 
            <a href="http://www.google.com/chromeframe/?redirect=true">installiere Google Chrome Frame</a> um dieses Seite richtig anzuzeigen.
        </p>
    <![endif]-->
    <header>
        <div class="container-fluid">
            <div class="row-fluid">
                <h1 id="logo">lillypark</h1>
                <nav class="pull-right">
                    <a href="#" class="active">taschen</a>
                    <a href="#">klimbim</a>
                    <a href="#">über uns</a>
                    <a href="#" 
                       style="font-style: italic;" 
                       onclick="$('#cart').toggle();">Warenkorb<span class="badge badge-info" ng-show="cartItemCount()">{{cartItemCount()}}</span></a>
                </nav>
            </div>
        </div>
    </header>

         <div id="cart" 
              class="popover bottom" 
              ng-controller="CartCtrl" 
              ng-show="visible" 
              style="left:auto;right:10px;top:65px;width:350px;">
            <div class="arrow" style="left:auto;right:65px;"></div>
            <h3 class="popover-title">Warenkorb</h3>
            <div class="popover-content">
                <div id="step0" ng-hide="cartItemCount()">
                    <h5>Der Warenkorb ist noch leer ;(</h5>
                </div>
                <div id="step1" class="collapse in" ng-show="cartItemCount()">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Produkt</th>
                                <th>Preis</th>
                                <th style="text-align: right;">Menge</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in itemsAsArray()">
                                <td>{{item.Product.Name}}</td>
                                <td>{{item.Product.Price | currency}}</td>
                                <td style="text-align: right;">{{item.Qty}}</td>
                            </tr>
                        </tbody>
                    </table>

                    <form action="">
                        <p>Wohin sollen wir das schicken?</p>
                        <select name="" id="">
                            <option value="DE">Deutschland (+ €5 Versand)</option>
                            <option value="AT">Österreich (+ €7 Versand)</option>
                        </select>

                        <p>
                            <h4 style="display: inline-block;">Dein Gesamtpreis ist&nbsp;<h2 style="display: inline-block;">{{totalPrice() | currency}}</h2>
                            </h4>
                        </p>
                        <button type="submit" class="btn btn-warning" data-toggle="collapse" data-target="#step2,#step1">Zur Kasse...</button>
                    </form>
                </div>
                <div id="step2" class="collapse out">
                    <p style="font-style:italic;color:#b7b7b7;">Die Rechnung wird an die Email-Adresse verschickt, die Du hier unten angibst. Dem Paket liegt keine Rechnung bei - so kannst Du llprk Produkte auch einfach verschenken.</p>
                    <form>
                        <fieldset>
                            <legend>Adresse</legend>
                            <label>Anrede</label>
                            <input type="text" required>

                            <label>Vorname / Name</label>
                            <input type="text" class="input-small" required>
                            <input type="text" class="input-small" required>

                            <label>Adresszusatz / Firma</label>
                            <input type="text">

                            <label>Strasse, Nr.</label>
                            <input type="text" required>

                            <label>Ort / Plz</label>
                            <input type="text" class="input-small" required>
                            <input type="text" class="input-small" required>

                            <label>Land</label>
                            <input type="text" readonly>

                            <label>E-Mail</label>
                            <input type="text">
                            
                            <hr />
                            <button type="submit" class="btn btn-small" data-toggle="collapse" data-target="#step2,#step1">Zurück</button>
                            <button type="submit" class="btn btn-warning" data-toggle="collapse" data-target="#step3,#step2">Weiter...</button>
                        </fieldset>
                    </form>
                </div>
                <div id="step3" class="collapse out">
                    <form>
                        <legend>Zahlungsmethode</legend>
                        <label>
                            <input type="radio" checked style="position:relative;top:-3px;"> Überweisung
                        </label>
                        <p style="font-style:italic;color:#b7b7b7;margin-left:17px;">
                           Derzeit kannst Du nur per Überweisung zahlen. Sobald das Geld auf unserem Konto eingelangt ist verschicken wir Deine Produkte. Bitte überweise an: 
                        </p>
                        <p style="margin-left:17px;">
                            IBAN: 1212-1212-1212-1212<br />
                            BIC: 32-32323-3232
                        </p>
                        <hr />
                        <button type="submit" class="btn btn-small" data-toggle="collapse" data-target="#step3,#step2">Zurück</button>
                        <button type="submit" class="btn btn-warning" data-toggle="collapse" data-target="#step3,#step4">Weiter...</button>
                    </form>
                </div>
                <div id="step4" class="collapse out">
                    <legend>Bestellübersicht</legend>
                    <button type="submit" class="btn btn-small" data-toggle="collapse" data-target="#step4,#step3">Zurück</button>
                    <button type="submit" class="btn btn-warning" data-toggle="collapse" data-target="#step5,#step4">Bestellung abschicken</button>
                </div>
                <div id="step5" class="collapse out">
                    <h5 style="margin-bottom:90px;">Deine Bestellung wird bearbeitet...</h5>
                    <div id="spinner" class="active">
                        <span id="first" class="ball"></span>
                        <span id="second" class="ball"></span>
                        <span id="third" class="ball"></span>
                    </div>
                </div>
            </div>
          </div>

    <section id="main" ng-controller="ProductsCtrl">
        <div class="container-fluid">
            @foreach(var category in Model.Categories.Keys) {
                <div class="row-fluid align-center">
                    <div class="span12">
                        <h2 class="categoryName">@category</h2>
                    </div>
                </div>

                <div class="row-fluid align-center">
                    <div class="span12 products">
                        @foreach(var product in Model.Categories[category]) {
                            <div class="span3">
                                <a href="#" 
                                   rel="popover" 
                                   onclick="$(this).popover()"
                                   data-placement="top" 
                                   data-content="@product.Description" 
                                   data-original-title="Beschreibung">
                                    @if(@product.Pictures.Any()) {
                                        <img src="@product.Pictures.First().PictureUrl" alt="@product.Name" />
                                    }
                                    <p><span>@product.Name @product.Price.ToString("c")</span></p>
                                    <p><button class="btn btn-small" ng-click="addToCart(@product.Id)">Kaufen</button></p>
                                </a>
                            </div>
                        }
                    </div>
                </div>
            }
        </div>

        <div class="container-fluid">
            <div class="row-fluid align-center explanation">
                <div class="span12">
                    <p>
                        Jede Tasche ist einzigartig.<br />
                        Darum gibt es sie auch nur genau ein mal.
                   
                        <br />
                        Schnapp dir deine tasche!
               
                    </p>
                </div>
            </div>
        </div>

    </section>

    <footer>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12 pull-right">
                    <nav>
                        <a href="#">events</a>
                        <a href="#">impressum</a>
                        <a href="http://www.facebook.com/taschenlilly" target="_blank">facebook</a>
                        <a href="#">twitter</a>
                    </nav>
                </div>
            </div>

            <div class="row-fluid">
                <div class="span12 pull-right">
                    <p class="copyright">&copy; 2012 lillypark</p>
                </div>
            </div>
        </div>
    </footer>


    @Scripts.Render("~/bundles/shop")

    @*@RenderSection("scripts", required: false)*@
    
    <script type="text/javascript">
        function scrollToTop() { $('html, body').animate({ scrollTop: 0 }, 200); }
        function scrollTo(e) { $('html, body').animate({ scrollTop: $(e).offset().top }, 200); }

        angular.module('ShopApp.Values', [])
            .value('products', @Html.Raw(Json.Encode(Model.Products)));
    </script>

</body>
</html>
